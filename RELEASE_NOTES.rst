Release Notes
=============

FACET 2.0
---------

2.0.0
~~~~~

``facet.data``
^^^^^^^^^^^^^^

- API: class :class:`.RangePartitioner` supports new optional arguments ``lower_bound``
  and ``upper_bound`` in method :meth:`~.RangePartitioner.fit` and no longer accepts
  them in the class initializer
- API: renamed method ``Sample.subsample()`` to :meth:`.Sample.resample`
- API: added method ``Sample.rebalance()`` to create a sample with added or updated
  weights

``facet.inspection``
^^^^^^^^^^^^^^^^^^^^

- API: :class:`.LearnerInspector` no longer uses learner crossfits and instead inspects
  models using a single pass of SHAP calculations, usually leading to performance gains
  of up to a factor of 50
- API: return :class:`.LearnerInspector` matrix outputs as :class:`.Matrix` instances
- API: diagonals of feature synergy, redundancy, and association matrices are now
  ``nan`` instead of 1.0
- API: the leaf order of :class:`.LinkageTree` objects generated by
  ``feature_…_linkage`` methods of :class:`.LearnerInspector` is now the same as the
  row and column order of :class:`.Matrix` objects returned by the corresponding
  ``feature_…_matrix`` methods of :class:`.LearnerInspector`, minimizing the distance
  between adjacent leaves
  The old sorting behaviour of FACET 1 can be restored using method
  :meth:`.LinkageTree.sort_by_weight`

``facet.selection``
^^^^^^^^^^^^^^^^^^^

- API: :class:`.ModelSelector` replaces FACET 1 class ``LearnerRanker``, and now
  supports any CV searcher that supports `scikit-learn`'s CV search API, including
  `scikit-learn`'s native searchers such as :class:`.GridSearchCV` or
  :class:`.RandomizedSearchCV`
- API: new classes :class:`.ParameterSpace` and :class:`MultiParameterSpace` offer an
  a more convenient and robust mechanism for declaring options or distributions for
  hyperparameter tuning

``facet.simulation``
^^^^^^^^^^^^^^^^^^^^

- API: simulations no longer depend on learner crossfits and instead are carried out
  as a single pass on the full dataset, using the *standard error of mean predictions*
  to obtain confidence intervals that less conservative yet more realistic
- VIZ: minor tweaks to simulation plots and reports generated by
  :class:`.SimulationDrawer`

``facet.validation``
^^^^^^^^^^^^^^^^^^^^

- API: remove class ``FullSampleValidator``

Other
^^^^^

- API: class ``LearnerCrossfit`` is no longer used in FACET 2 and has been removed


FACET 1.2
---------

FACET 1.2 adds support for *sklearndf* 1.2 and *scikit-learn* 0.24.
It also introduces the ability to run simulations on a subsample of the data used to
fit the underlying crossfit.
One example where this can be useful is to use only a recent period of a time series as
the baseline of a simulation.


1.2.2
~~~~~

- catch up with FACET 1.1.2


1.2.1
~~~~~

- FIX: fix a bug in :class:`.UnivariateProbabilitySimulator` that was introduced in
  FACET 1.2.0
- catch up with FACET 1.1.1


1.2.0
~~~~~

- BUILD: added support for *sklearndf* 1.2 and *scikit-learn* 0.24
- API: new optional parameter ``subsample`` in method
  :meth:`.BaseUnivariateSimulator.simulate_feature` can be used to specify a subsample
  to be used in the simulation (but simulating using a crossfit based on the full
  sample)


FACET 1.1
---------

FACET 1.1 refines and enhances the association/synergy/redundancy calculations provided
by the :class:`.LearnerInspector`.


1.1.2
~~~~~

- DOC: use a downloadable dataset in the `getting started` notebook
- FIX: import :mod:`catboost` if present, else create a local module mockup
- FIX: correctly identify if ``sample_weights`` is undefined when re-fitting a model
  on the full dataset in a :class:`.LearnerCrossfit`
- BUILD: relax package dependencies to support any `numpy` version 1.`x` from 1.16


1.1.1
~~~~~

- DOC: add reference to FACET research paper on the project landing page
- FIX: correctly count positive class frequency in UnivariateProbabilitySimulator


1.1.0
~~~~~

- API: SHAP interaction vectors can (in part) also be influenced by redundancy among
  features. This can inflate quantifications of synergy, especially in cases where two
  variables are highly redundant. FACET now corrects interaction vectors for redundancy
  prior to calculating synergy. Technically we ensure that each interaction vector is
  orthogonal w.r.t the main effect vectors of both associated features.
- API: FACET now calculates synergy, redundancy, and association separately for each
  model in a crossfit, then returns the mean of all resulting matrices. This leads to a
  slight increase in accuracy, and also allows us to calculate the standard deviation
  across matrices as an indication of confidence for each calculated value.
- API: Method :meth:`.LearnerInspector.shap_plot_data` now returns SHAP values for the
  positive class of binary classifiers.
- API: Increase efficiency of :class:`.ModelSelector` parallelization by adopting the
  new :class:`pytools.parallelization.JobRunner` API provided by :mod:`pytools`
- BUILD: add support for :mod:`shap` 0.38 and 0.39


FACET 1.0
---------

1.0.3
~~~~~

- FIX: restrict package requirements to *gamma-pytools* 1.0.* and *sklearndf* 1.0.x,
  since FACET 1.0 is not compatible with *gamma-pytools* 1.1.*

1.0.2
~~~~~

This is a maintenance release focusing on enhancements to the CI/CD pipeline and bug
fixes.

- API: add support for :mod:`shap` 0.36 and 0.37 via a new :class:`.BaseExplainer`
  stub class
- FIX: apply color scheme to the histogram section in :class:`.SimulationMatplotStyle`
- BUILD: add support for :mod:`numpy` 1.20
- BUILD: updates and changes to the CI/CD pipeline


1.0.1
~~~~~

Initial release.
